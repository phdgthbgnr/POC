var finishState={init:function(a){this.levelID=a.levelID;this.curbmpTime=a.btmp;this.mn=a.chrono.min;this.sc=a.chrono.sec},preload:function(){console.log("this.levelID finish "+this.levelID);this.unit="";var a=game.add.sprite(0,0,"bkg");a.y=0;game.set2Scale(a);game.addDisplayLoader();game.load.onFileComplete.add(this.filecomplete,this);game.load.onLoadComplete.add(this.loadcomplete,this);if(this.levelID<3){game.load.image("bulle",game.pathText+"allcards.png");game.load.spritesheet("go","_img/go.png",427,98)}else{game.load.image("bulle",game.pathText+"congrat.png");game.load.spritesheet("go","_img/play_again.png",280,60)}game.load.image("tracking04",game.pathTrack+"pixel.gif?r=finish"+this.levelID+"&time="+this.mn+"-"+this.sc);this.levelID++;game.load.image("bfinish",game.pathText+"finished.png");if(this.mn==1){game.load.image("minute",game.pathText+"minute.png");this.unit="minutes"}if(this.mn>1){game.load.image("minute",game.pathText+"minutes.png");this.unit="minutes"}if(this.mn==0){game.load.image("minute",game.pathText+"secondes.png");this.unit="secondes"}},create:function(){this.clicf=game.add.audio("clicf");game.addMusicButton();game.addPauseButton();var k=game.add.sprite(0,0,"goku");k.y=0;k.alpha=1;game.set2Scale(k);game.set2Position(370,60,k);var a=game.add.image(0,0,"bulle");a.anchor.set(0,0);game.set2Scale(a);a.x=0;a.y=game.get1Position(160);a.alpha=0;var e=game.add.button(0,0,"go",this.start,this,1,0,2);e.name="go";e.alpha=0;game.set2ButtonScale(e);if(this.levelID<4){game.set2Position(-30,340,e)}else{game.set2Position(90,440,e)}var d=game.add.image(0,0,"bfinish");game.set2Scale(d);var b=game.add.image(0,0,"minute");b.smoothed=true;game.set2Scale(b);b.anchor.set(0.5,0.5);if(this.unit=="minutes"){game.set2Position(210,112,b)}else{if(this.unit=="secondes"){game.set2Position(248,112,b)}else{game.set2Position(214,112,b)}}var j;for(var h=0;h<this.curbmpTime.length;h++){if(this.unit=="minutes"||this.unit=="minute"){if(h==0&&this.curbmpTime[h].key!="ch0"){j=game.add.image(0,0,this.curbmpTime[h].key);game.set2Scale(j);game.set2Position(76,91,j)}if(h==1){j=game.add.image(0,0,this.curbmpTime[h].key);game.set2Scale(j);game.set2Position(102,91,j)}if(h==2&&this.sc>0){j=game.add.image(0,0,this.curbmpTime[h].key);game.set2Scale(j);game.set2Position(286,91,j)}if(h==3&&this.sc>0){j=game.add.image(0,0,this.curbmpTime[h].key);game.set2Scale(j);game.set2Position(312,91,j)}}if(this.unit=="secondes"){if(h==2&&this.curbmpTime[h].key!="ch0"){j=game.add.image(0,0,this.curbmpTime[h].key);game.set2Scale(j);game.set2Position(100,91,j)}if(h==3){j=game.add.image(0,0,this.curbmpTime[h].key);game.set2Scale(j);game.set2Position(126,91,j)}}}var g=game.add.tween(k).from({x:-k.width/2,alpha:0},300,"Sine.easeInOut");var f=game.add.tween(a).to({alpha:1},300,"Sine.easeInOut");var c=game.add.tween(e).to({alpha:1},300,"Sine.easeInOut");g.start();g.chain(f);f.chain(c)},start:function(b,a){this.clicf.play("",0,0.3,false,true);if(this.levelID<4){game.state.start("play",true,false,{levelID:this.levelID})}if(this.levelID==4){game.state.start("menu",true,false)}},filecomplete:function(a,d,e,b,c){game.processLoader(a)},loadcomplete:function(){game.destroyLoader()}};