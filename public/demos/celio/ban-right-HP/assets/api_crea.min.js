!function(){"use strict";function f(a,b,c,d){if(a.addEventListener)a.addEventListener(b,c,!!d);else if(a.attachEvent)a.attachEvent("on"+b,c);else{var e=a["on"+b];a["on"+b]=function(a){e(a),c(a)}}}for(var e,a=!1,b=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],c=b.length,d={};c--;)e=b[c],d[e]=window.console[e]&&a?window.console[e].bind?window.console[e].bind(window.console):window.console[e]:function(){};var g=function(){};g.prototype={participants:[],AddParticipant:function(a){a&&a.postMessage&&this.participants.push(a)},SendMessage:function(a){for(var b=0,c=this.participants.length;c>b;b++)this.participants[b].postMessage(a,"*")},AddMessageReceptionEvent:function(a,b){f(a,"message",b)}};var h={regExpFunctionStruct:/function\s*\((.*?)\)\s*\{((.|\s)+)\}/,apiMethodNames:["ready","track","clickTag","addVideoTracker","trackVideoOnTime","close","expand","collapse","addExpandListener","addCollapseListener","addSuspendListener","addResumptionListener"],apiAttributeNames:["version"],etablishedCommunication:!1,isApiReady:!1,readyCallback:function(){},"public":{isInit:!1,isCreaReady:!1,expandListener:[],collapseListener:[],suspendListener:[],resumptionListener:[],init:function(a){this.isInit||(this.isInit=!0,"function"==typeof a&&(h.readyCallback=function(){a()}),setTimeout(function(){h.ApiReady()},300))},send:function(a){h.SendMessage(a)}},receive:{InitMethod:function(a,b){if("string"==typeof b){var c=b.match(this.regExpFunctionStruct),e=[];c&&(""!=c[1]&&(e=c[1].split(/, ?/)),e.push(c[2]),this.public[a]=Function.apply(this,e))}"undefined"==typeof this.public[a]&&d.error("API_Crea.InitMethod : m\xe9thode "+a+" mal cr\xe9\xe9e")},InitAttribute:function(a,b){this.public[a]=b},GetConfirmationToCommunicate:function(){this.SendConfirmationToCommunicate()},ConfirmCommunication:function(){this.StartCommunication()},EndGetAttributesAndMethods:function(){this.ApiReady()},DispatchExpandEvent:function(){for(var a=0,b=this.public.expandListener.length;b>a;a++)this.public.expandListener[a]()},DispatchCollapseEvent:function(){for(var a=0,b=this.public.collapseListener.length;b>a;a++)this.public.collapseListener[a]()},DispatchSuspendEvent:function(){for(var a=0,b=this.public.suspendListener.length;b>a;a++)this.public.suspendListener[a]()},DispatchResumptionEvent:function(){for(var a=0,b=this.public.resumptionListener.length;b>a;a++)this.public.resumptionListener[a]()}},Init:function(){this.communicationPostMessage=new g;var a=this;this.communicationPostMessage.AddMessageReceptionEvent(window,function(b){a.InterpretMessage(b)}),this.communicationPostMessage.AddParticipant(window.parent),this.SendMessage({methodToCall:"GetConfirmationToCommunicate"});var a=this;setTimeout(function(){a.ApiReady()},300)},ApiReady:function(){if(!this.isApiReady){this.isApiReady=!0;for(var a=0,b=this.apiMethodNames.length;b>a;a++)this.apiMethodNames[a],"undefined"==typeof this.public[this.apiMethodNames[a]]&&(d.warn("API_Crea : "+this.apiMethodNames[a]+" undefined !"),this.public[this.apiMethodNames[a]]=function(){});for(var a=0,e=this.apiAttributeNames.length;e>a;a++)this.apiAttributeNames[a],"undefined"==typeof this.public[this.apiAttributeNames[a]]&&(d.warn("API_Crea : "+this.apiAttributeNames[a]+" undefined !"),this.public[this.apiAttributeNames[a]]=null);this.readyCallback()}},StartCommunication:function(){this.etablishedCommunication||(this.etablishedCommunication=!0,d.log("API_Crea : StartCommunication"),this.GetAttributesAndMethods())},InterpretMessage:function(a){var b=JSON.parse(a.data),c=b.methodToCall;if(c&&"function"==typeof this.receive[c]){var e=b.arguments||[];d.log("API_Crea : receive "+c,e),this.receive[c].apply(this,e)}},SendMessage:function(a){d.log("API_Crea : send "+a.methodToCall),h.communicationPostMessage.SendMessage(JSON.stringify(a))},SendConfirmationToCommunicate:function(){this.SendMessage({methodToCall:"ConfirmCommunication"}),this.StartCommunication()},GetAttributesAndMethods:function(){this.SendMessage({methodToCall:"GetAttributesAndMethods"})}};h.Init(),window.API_MMM=h.public}();